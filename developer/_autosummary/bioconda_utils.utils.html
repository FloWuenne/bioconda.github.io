
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>utils &#8212; Bioconda  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/style.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/font-awesome-4.7.0/css/font-awesome.min.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/vega.min.js"></script>
    <script src="../../_static/vega-lite.min.js"></script>
    <script src="../../_static/vega-embed.min.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Tutorials" href="../../tutorials/index.html" />
    <link rel="prev" title="upload" href="bioconda_utils.upload.html" />
    <link href="https://fonts.googleapis.com/css?family=Lato|Raleway" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet">

    <link rel="apple-touch-icon" sizes="57x57" href="../../_static/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="../../_static/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../../_static/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="../../_static/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../../_static/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="../../_static/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="../../_static/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="../../_static/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../../_static/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="../../_static/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../_static/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../../_static/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../_static/favicon-16x16.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="../../_static/ms-icon-144x144.png">

    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#ffffff">

   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />


  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../index.html">
    <img class="logo" src="../../_static/logo/bioconda_monochrome_small.png" alt="Logo"/>
    
  </a>
</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributor/index.html">Contributing to Bioconda</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Developer Docs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bioconda-utils.html"><code class="docutils literal notranslate"><span class="pre">bioconda-utils</span></code></a></li>
<li class="toctree-l2 current"><a class="reference internal" href="bioconda_utils.html">bioconda_utils</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.bot.html">bot</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.lint.html">lint</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.aiopipe.html">aiopipe</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.bioconductor_skeleton.html">bioconductor_skeleton</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.build.html">build</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.circleci.html">circleci</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.cli.html">cli</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.cran_skeleton.html">cran_skeleton</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.docker_utils.html">docker_utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.githandler.html">githandler</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.githubhandler.html">githubhandler</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.gitter.html">gitter</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.graph.html">graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.hosters.html">hosters</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.pkg_test.html">pkg_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.recipe.html">recipe</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.sphinxext.html">sphinxext</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.autobump.html">autobump</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.update_pinnings.html">update_pinnings</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.upload.html">upload</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">utils</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="bioconda_utils.bot.html">bot</a></li>
<li class="toctree-l2"><a class="reference internal" href="bioconda_utils.lint.html">lint</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

<ul>
  
  <li class="toctree-l1"><a href="https://github.com/bioconda/bioconda-recipes">Bioconda @ Github</a></li>
  
  <li class="toctree-l1"><a href="../../conda-package_index.html">Package Index</a></li>
  
  <li class="toctree-l1"><a href="https://gitter.im/bioconda/Lobby"><img alt="Gitter" src="https://img.shields.io/gitter/room/bioconda/Lobby.svg"></a></li>
  
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-bioconda_utils.utils">
<span id="utils"></span><h1>utils<a class="headerlink" href="#module-bioconda_utils.utils" title="Permalink to this headline">¶</a></h1>
<p>Utility Functions and Classes</p>
<p>This module collects small pieces of code used throughout <a class="reference internal" href="bioconda_utils.html#module-bioconda_utils" title="bioconda_utils"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bioconda_utils</span></code></a>.</p>
<p class="rubric">Functions</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">allowed_env_var</span></code>(s[, docker])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">bin_for</span></code>([name])</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.built_package_paths" title="bioconda_utils.utils.built_package_paths"><code class="xref py py-obj docutils literal notranslate"><span class="pre">built_package_paths</span></code></a>(recipe)</p></td>
<td><p>Returns the path to which a recipe would be built.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.changed_since_master" title="bioconda_utils.utils.changed_since_master"><code class="xref py py-obj docutils literal notranslate"><span class="pre">changed_since_master</span></code></a>(recipe_folder)</p></td>
<td><p>Return filenames changed since master branch.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.check_recipe_skippable" title="bioconda_utils.utils.check_recipe_skippable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_recipe_skippable</span></code></a>(recipe, check_channels)</p></td>
<td><p>Return True if the same number of builds (per subdir) defined by the recipe are already in channel_packages.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.ellipsize_recipes" title="bioconda_utils.utils.ellipsize_recipes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ellipsize_recipes</span></code></a>(recipes, recipe_folder[, n, m])</p></td>
<td><p>Logging helper showing recipe list</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.ensure_list" title="bioconda_utils.utils.ensure_list"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ensure_list</span></code></a>(obj)</p></td>
<td><p>Wraps <strong>obj</strong> in a list if necessary</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">envstr</span></code>(env)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.file_from_commit" title="bioconda_utils.utils.file_from_commit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">file_from_commit</span></code></a>(commit, filename)</p></td>
<td><p>Returns the contents of a file at a particular commit as a string.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">flatten_dict</span></code>(dict)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.get_blacklist" title="bioconda_utils.utils.get_blacklist"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_blacklist</span></code></a>(config, recipe_folder)</p></td>
<td><p>Return list of recipes to skip from blacklists</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_conda_build_config_files</span></code>([config])</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.get_deps" title="bioconda_utils.utils.get_deps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_deps</span></code></a>([recipe, build])</p></td>
<td><p>Generator of dependencies for a single recipe</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.get_free_space" title="bioconda_utils.utils.get_free_space"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_free_space</span></code></a>()</p></td>
<td><p>Return free space in MB on disk</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.get_latest_recipes" title="bioconda_utils.utils.get_latest_recipes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_latest_recipes</span></code></a>(recipe_folder, config[, ...])</p></td>
<td><p>Generator of recipes.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_package_paths</span></code>(recipe, check_channels[, ...])</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.get_recipes" title="bioconda_utils.utils.get_recipes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_recipes</span></code></a>(recipe_folder[, package, exclude])</p></td>
<td><p>Generator of recipes.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.last_commit_to_master" title="bioconda_utils.utils.last_commit_to_master"><code class="xref py py-obj docutils literal notranslate"><span class="pre">last_commit_to_master</span></code></a>()</p></td>
<td><p>Identifies the day of the last commit to master branch.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.load_all_meta" title="bioconda_utils.utils.load_all_meta"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_all_meta</span></code></a>(recipe[, config, finalize])</p></td>
<td><p>For each environment, yield the rendered meta.yaml.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.load_conda_build_config" title="bioconda_utils.utils.load_conda_build_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_conda_build_config</span></code></a>([platform, trim_skip])</p></td>
<td><p>Load conda build config while considering global pinnings from conda-forge.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.load_config" title="bioconda_utils.utils.load_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_config</span></code></a>(path)</p></td>
<td><p>Parses config file, building paths to relevant blacklists</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.load_first_metadata" title="bioconda_utils.utils.load_first_metadata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_first_metadata</span></code></a>(recipe[, config, finalize])</p></td>
<td><p>Returns just the first of possibly many metadata files.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.load_meta_fast" title="bioconda_utils.utils.load_meta_fast"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_meta_fast</span></code></a>(recipe[, env])</p></td>
<td><p>Given a package name, find the current meta.yaml file, parse it, and return the dict.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.newly_unblacklisted" title="bioconda_utils.utils.newly_unblacklisted"><code class="xref py py-obj docutils literal notranslate"><span class="pre">newly_unblacklisted</span></code></a>(config_file, ...)</p></td>
<td><p>Returns the set of recipes that were blacklisted in master branch but have since been removed from the blacklist.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">parallel_iter</span></code>(func, items, desc, *args, **kwargs)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.run" title="bioconda_utils.utils.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(cmds[, env, mask, live, mylogger, loglevel])</p></td>
<td><p>Run a command (with logging, masking, etc)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.sandboxed_env" title="bioconda_utils.utils.sandboxed_env"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sandboxed_env</span></code></a>(env)</p></td>
<td><p>Context manager to temporarily set os.environ, only allowing env vars from the existing <a class="reference external" href="https://docs.python.org/3/library/os.html#os.environ" title="(in Python v3.10)"><code class="xref any docutils literal notranslate"><span class="pre">os.environ</span></code></a> or the provided <strong>env</strong> that match ENV_VAR_WHITELIST globs.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_max_threads</span></code>(n)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.setup_logger" title="bioconda_utils.utils.setup_logger"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setup_logger</span></code></a>([name, loglevel, logfile, ...])</p></td>
<td><p>Set up logging for bioconda-utils</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.temp_env" title="bioconda_utils.utils.temp_env"><code class="xref py py-obj docutils literal notranslate"><span class="pre">temp_env</span></code></a>(env)</p></td>
<td><p>Context manager to temporarily set os.environ.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.temp_os" title="bioconda_utils.utils.temp_os"><code class="xref py py-obj docutils literal notranslate"><span class="pre">temp_os</span></code></a>(platform)</p></td>
<td><p>Context manager to temporarily set sys.platform.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.threads_to_use" title="bioconda_utils.utils.threads_to_use"><code class="xref py py-obj docutils literal notranslate"><span class="pre">threads_to_use</span></code></a>()</p></td>
<td><p>Returns the number of cores we are allowed to run on</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.tqdm" title="bioconda_utils.utils.tqdm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tqdm</span></code></a>(*args, **kwargs)</p></td>
<td><p>Wrapper around TQDM handling disable</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.validate_config" title="bioconda_utils.utils.validate_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">validate_config</span></code></a>(config)</p></td>
<td><p>Validate config against schema</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.wraps" title="bioconda_utils.utils.wraps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">wraps</span></code></a>(func)</p></td>
<td><p>Custom wraps() function for decorators</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.AsyncRequests" title="bioconda_utils.utils.AsyncRequests"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncRequests</span></code></a>()</p></td>
<td><p>Download a bunch of files in parallel</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.CondaBuildConfigFile" title="bioconda_utils.utils.CondaBuildConfigFile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CondaBuildConfigFile</span></code></a>(arg, path)</p></td>
<td><p>Create new instance of CondaBuildConfigFile(arg, path)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.EnvMatrix" title="bioconda_utils.utils.EnvMatrix"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EnvMatrix</span></code></a>(env)</p></td>
<td><p>Intended to be initialized with a YAML file and iterated over to yield all combinations of environments.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.JinjaSilentUndefined" title="bioconda_utils.utils.JinjaSilentUndefined"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JinjaSilentUndefined</span></code></a>([hint, obj, name, exc])</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.LogFuncFilter" title="bioconda_utils.utils.LogFuncFilter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LogFuncFilter</span></code></a>(func[, trunc_msg, max_lines, ...])</p></td>
<td><p>Logging filter capping the number of messages emitted from given function</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.LoggingSourceRenameFilter" title="bioconda_utils.utils.LoggingSourceRenameFilter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LoggingSourceRenameFilter</span></code></a>()</p></td>
<td><p>Logging filter for abbreviating module name in logs</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Progress</span></code>()</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.RepoData" title="bioconda_utils.utils.RepoData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RepoData</span></code></a>()</p></td>
<td><p>Singleton providing access to package directory on anaconda cloud</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.TqdmHandler" title="bioconda_utils.utils.TqdmHandler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TqdmHandler</span></code></a>(*args, **kwargs)</p></td>
<td><p>Tqdm aware logging StreamHandler</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Exceptions</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.BiocondaUtilsWarning" title="bioconda_utils.utils.BiocondaUtilsWarning"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BiocondaUtilsWarning</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.DivergentBuildsError" title="bioconda_utils.utils.DivergentBuildsError"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DivergentBuildsError</span></code></a></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<p class="rubric">Documentation</p>
<dl class="py class">
<dt class="sig sig-object py" id="bioconda_utils.utils.AsyncRequests">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">AsyncRequests</span></span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#AsyncRequests"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.AsyncRequests" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a bunch of files in parallel</p>
<p>This is not really a class, more a name space encapsulating a bunch of calls.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="bioconda_utils.utils.AsyncRequests.CONNECTIONS_PER_HOST">
<span class="sig-name descname"><span class="pre">CONNECTIONS_PER_HOST</span></span><em class="property"> <span class="pre">=</span> <span class="pre">4</span></em><a class="headerlink" href="#bioconda_utils.utils.AsyncRequests.CONNECTIONS_PER_HOST" title="Permalink to this definition">¶</a></dt>
<dd><p>Max connections to each server</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bioconda_utils.utils.AsyncRequests.USER_AGENT">
<span class="sig-name descname"><span class="pre">USER_AGENT</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'bioconda/bioconda-utils'</span></em><a class="headerlink" href="#bioconda_utils.utils.AsyncRequests.USER_AGENT" title="Permalink to this definition">¶</a></dt>
<dd><p>Identify ourselves</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bioconda_utils.utils.AsyncRequests.fetch">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">fetch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">urls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">descs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datas</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#AsyncRequests.fetch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.AsyncRequests.fetch" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch data from URLs.</p>
<p>This will use asyncio to manage a pool of connections at once, speeding
up download as compared to iterative use of <code class="docutils literal notranslate"><span class="pre">requests</span></code> significantly.
It will also retry on non-permanent HTTP error codes (i.e. 429, 502,
503 and 504).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>urls</strong> – List of URLS</p></li>
<li><p><strong>descs</strong> – Matching list of descriptions (for progress display)</p></li>
<li><p><strong>cb</strong> – As each download is completed, data is passed through this function.
Use to e.g. offload json parsing into download loop.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="bioconda_utils.utils.BiocondaUtilsWarning">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">BiocondaUtilsWarning</span></span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#BiocondaUtilsWarning"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.BiocondaUtilsWarning" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bioconda_utils.utils.CondaBuildConfigFile">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">CondaBuildConfigFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bioconda_utils.utils.CondaBuildConfigFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Create new instance of CondaBuildConfigFile(arg, path)</p>
<dl class="py property">
<dt class="sig sig-object py" id="bioconda_utils.utils.CondaBuildConfigFile.arg">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">arg</span></span><a class="headerlink" href="#bioconda_utils.utils.CondaBuildConfigFile.arg" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="bioconda_utils.utils.CondaBuildConfigFile.path">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">path</span></span><a class="headerlink" href="#bioconda_utils.utils.CondaBuildConfigFile.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="bioconda_utils.utils.DivergentBuildsError">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">DivergentBuildsError</span></span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#DivergentBuildsError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.DivergentBuildsError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bioconda_utils.utils.EnvMatrix">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">EnvMatrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#EnvMatrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.EnvMatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Intended to be initialized with a YAML file and iterated over to yield all
combinations of environments.</p>
<p>YAML file has the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CONDA_PY</span><span class="p">:</span>
  <span class="o">-</span> <span class="s2">&quot;2.7&quot;</span>
  <span class="o">-</span> <span class="s2">&quot;3.5&quot;</span>
<span class="n">CONDA_BOOST</span><span class="p">:</span> <span class="s2">&quot;1.60&quot;</span>
<span class="n">CONDA_PERL</span><span class="p">:</span> <span class="s2">&quot;5.22.0&quot;</span>
<span class="n">CONDA_NPY</span><span class="p">:</span> <span class="s2">&quot;110&quot;</span>
<span class="n">CONDA_NCURSES</span><span class="p">:</span> <span class="s2">&quot;5.9&quot;</span>
<span class="n">CONDA_GSL</span><span class="p">:</span> <span class="s2">&quot;1.16&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>env</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – If str, assume it’s a path to a YAML-format filename and load it
into a dict. If a dict is provided, use it directly.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bioconda_utils.utils.JinjaSilentUndefined">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">JinjaSilentUndefined</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hint=None</span></em>, <em class="sig-param"><span class="pre">obj=missing</span></em>, <em class="sig-param"><span class="pre">name=None</span></em>, <em class="sig-param"><span class="pre">exc=&lt;class</span> <span class="pre">'jinja2.exceptions.UndefinedError'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#JinjaSilentUndefined"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.JinjaSilentUndefined" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bioconda_utils.utils.LogFuncFilter">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">LogFuncFilter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trunc_msg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consecutive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#LogFuncFilter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.LogFuncFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Logging filter capping the number of messages emitted from given function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> – The function for which to filter log messages</p></li>
<li><p><strong>trunc_msg</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – The message to emit when logging is truncated, to inform user that
messages will from now on be hidden.</p></li>
<li><p><strong>max_lines</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – Max number of log messages to allow to pass</p></li>
<li><p><strong>consectuctive</strong> – If try, filter applies to consectutive messages and resets
if a message from a different source is encountered.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Fixme:</dt><dd><p>The implementation  assumes that <strong>func</strong> uses a logger initialized with
<code class="docutils literal notranslate"><span class="pre">getLogger(__name__)</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bioconda_utils.utils.LoggingSourceRenameFilter">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">LoggingSourceRenameFilter</span></span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#LoggingSourceRenameFilter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.LoggingSourceRenameFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Logging filter for abbreviating module name in logs</p>
<p>Maps <code class="docutils literal notranslate"><span class="pre">bioconda_utils</span></code> to <code class="docutils literal notranslate"><span class="pre">BIOCONDA</span></code> and for everything else
to just the top level package uppercased.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bioconda_utils.utils.RepoData">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">RepoData</span></span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#RepoData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.RepoData" title="Permalink to this definition">¶</a></dt>
<dd><p>Singleton providing access to package directory on anaconda cloud</p>
<p>If the first call provides a filename as <strong>cache</strong> argument, the
file is used to cache the directory in CSV format.</p>
<p>Data structure:</p>
<p>Each <strong>channel</strong> hosted at anaconda cloud comprises a number of
<strong>subdirs</strong> in which the individual package files reside. The
<strong>subdirs</strong> can be one of <strong>noarch</strong>, <strong>osx-64</strong> and <strong>linux-64</strong>
for Bioconda. (Technically <code class="docutils literal notranslate"><span class="pre">(noarch|(linux|osx|win)-(64|32))</span></code>
appears to be the schema).</p>
<p>For <strong>channel/subdir</strong> (aka <strong>channel/platform</strong>) combination, a
<strong>repodata.json</strong> contains a <strong>package</strong> key describing each
package file with at least the following information:</p>
<p>name: Package name (lowercase, alphanumeric + dash)</p>
<p>version: Version (no dash, PEP440)</p>
<p>build_number: Non negative integer indicating packaging revisions</p>
<dl class="simple">
<dt>build: String comprising hash of pinned dependencies and build</dt><dd><p>number. Used to distinguish different builds of the same
package/version combination.</p>
</dd>
<dt>depends: Runtime requirements for package as list of strings. We</dt><dd><p>do not currently load this.</p>
</dd>
<dt>arch: Architecture key (x86_64). Not used by conda and not loaded</dt><dd><p>here.</p>
</dd>
<dt>platform: Platform of package (osx, linux, noarch). Optional</dt><dd><p>upstream, not used by conda. We generate this from the subdir
information to have it available.</p>
</dd>
</dl>
<p>Repodata versions:</p>
<p>The version is indicated by the key <strong>repodata_version</strong>, with
absence of that key indication version 0.</p>
<p>In version 0, the <strong>info</strong> key contains the <strong>subdir</strong>,
<strong>platform</strong>, <strong>arch</strong>, <strong>default_python_version</strong> and
<strong>default_numpy_version</strong> keys. In version 1 it only contains the
<strong>subdir</strong> key.</p>
<p>In version 1, a key <strong>removed</strong> was added, listing packages
removed from the repository.</p>
<p>Makes RepoData a singleton</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="bioconda_utils.utils.RepoData.cache_timeout">
<span class="sig-name descname"><span class="pre">cache_timeout</span></span><em class="property"> <span class="pre">=</span> <span class="pre">28800</span></em><a class="headerlink" href="#bioconda_utils.utils.RepoData.cache_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>default lifetime for repodata cache</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="bioconda_utils.utils.RepoData.channels">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">channels</span></span><a class="headerlink" href="#bioconda_utils.utils.RepoData.channels" title="Permalink to this definition">¶</a></dt>
<dd><p>Return channels to load.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bioconda_utils.utils.RepoData.columns">
<span class="sig-name descname"><span class="pre">columns</span></span><em class="property"> <span class="pre">=</span> <span class="pre">['build',</span> <span class="pre">'build_number',</span> <span class="pre">'name',</span> <span class="pre">'version',</span> <span class="pre">'depends',</span> <span class="pre">'channel',</span> <span class="pre">'subdir',</span> <span class="pre">'platform']</span></em><a class="headerlink" href="#bioconda_utils.utils.RepoData.columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Columns available in internal dataframe</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="bioconda_utils.utils.RepoData.df">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">df</span></span><a class="headerlink" href="#bioconda_utils.utils.RepoData.df" title="Permalink to this definition">¶</a></dt>
<dd><p>Internal Pandas DataFrame object</p>
<p>Try not to use this … the point of this class is to be able to
change the structure in which the data is held.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bioconda_utils.utils.RepoData.get_latest_versions">
<span class="sig-name descname"><span class="pre">get_latest_versions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channel</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#RepoData.get_latest_versions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.RepoData.get_latest_versions" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the latest version for each package in <strong>channel</strong></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bioconda_utils.utils.RepoData.get_package_data">
<span class="sig-name descname"><span class="pre">get_package_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_number</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">platform</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">native</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#RepoData.get_package_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.RepoData.get_package_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Get <strong>key</strong> for each package in <strong>channels</strong></p>
<p>If <strong>key</strong> is not give, returns bool whether there are matches.
If <strong>key</strong> is a string, returns list of strings.
If <strong>key</strong> is a list of string, returns tuple iterator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bioconda_utils.utils.RepoData.get_versions">
<span class="sig-name descname"><span class="pre">get_versions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#RepoData.get_versions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.RepoData.get_versions" title="Permalink to this definition">¶</a></dt>
<dd><p>Get versions available for package</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – package name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary mapping version numbers to list of architectures
e.g. {‘0.1’: [‘linux’], ‘0.2’: [‘linux’, ‘osx’], ‘0.3’: [‘noarch’]}</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bioconda_utils.utils.RepoData.platforms">
<span class="sig-name descname"><span class="pre">platforms</span></span><em class="property"> <span class="pre">=</span> <span class="pre">['linux',</span> <span class="pre">'osx',</span> <span class="pre">'noarch']</span></em><a class="headerlink" href="#bioconda_utils.utils.RepoData.platforms" title="Permalink to this definition">¶</a></dt>
<dd><p>Platforms loaded</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bioconda_utils.utils.RepoData.set_timeout">
<span class="sig-name descname"><span class="pre">set_timeout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#RepoData.set_timeout"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.RepoData.set_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the timeout after which the repodata should be reloaded</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bioconda_utils.utils.TqdmHandler">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">TqdmHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#TqdmHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.TqdmHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Tqdm aware logging StreamHandler</p>
<p>Passes all log writes through tqdm to allow progress bars and log
messages to coexist without clobbering terminal</p>
<p>Initialize the handler.</p>
<p>If stream is not specified, sys.stderr is used.</p>
<dl class="py method">
<dt class="sig sig-object py" id="bioconda_utils.utils.TqdmHandler.emit">
<span class="sig-name descname"><span class="pre">emit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#TqdmHandler.emit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.TqdmHandler.emit" title="Permalink to this definition">¶</a></dt>
<dd><p>Emit a record.</p>
<p>If a formatter is specified, it is used to format the record.
The record is then written to the stream with a trailing newline.  If
exception information is present, it is formatted using
traceback.print_exception and appended to the stream.  If the stream
has an ‘encoding’ attribute, it is used to determine how to do the
output to the stream.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.built_package_paths">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">built_package_paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recipe</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#built_package_paths"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.built_package_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the path to which a recipe would be built.</p>
<p>Does not necessarily exist; equivalent to <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">build</span> <span class="pre">--output</span> <span class="pre">recipename</span></code>
but without the subprocess.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.changed_since_master">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">changed_since_master</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recipe_folder</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#changed_since_master"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.changed_since_master" title="Permalink to this definition">¶</a></dt>
<dd><p>Return filenames changed since master branch.</p>
<p>Note that this uses <code class="docutils literal notranslate"><span class="pre">origin</span></code>, so if you are working on a fork of the main
repo and have added the main repo as <code class="docutils literal notranslate"><span class="pre">upstream</span></code>, then you’ll have to do
a <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">master</span> <span class="pre">&amp;&amp;</span> <span class="pre">git</span> <span class="pre">pull</span> <span class="pre">upstream</span> <span class="pre">master</span></code> to update your fork.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.check_recipe_skippable">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">check_recipe_skippable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recipe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_channels</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#check_recipe_skippable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.check_recipe_skippable" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the same number of builds (per subdir) defined by the recipe
are already in channel_packages.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.ellipsize_recipes">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">ellipsize_recipes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recipes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recipe_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#ellipsize_recipes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.ellipsize_recipes" title="Permalink to this definition">¶</a></dt>
<dd><p>Logging helper showing recipe list</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>recipes</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Collection" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – List of recipes</p></li>
<li><p><strong>recipe_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Folder name to strip from recipes.</p></li>
<li><p><strong>n</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – Show at most this number of recipes, with “…” if more are found.</p></li>
<li><p><strong>m</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – Don’t show anything if more recipes than this
(pointless to show first 5 of 5000)</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A string like ” (htslib, samtools, …)” or “”</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.ensure_list">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">ensure_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#ensure_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.ensure_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps <strong>obj</strong> in a list if necessary</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ensure_list</span><span class="p">(</span><span class="s2">&quot;one&quot;</span><span class="p">)</span>
<span class="go">[&quot;one&quot;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ensure_list</span><span class="p">([</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">])</span>
<span class="go">[&quot;one&quot;, &quot;two&quot;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.file_from_commit">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">file_from_commit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">commit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#file_from_commit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.file_from_commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the contents of a file at a particular commit as a string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>commit</strong> (<em>commit-like string</em>) – </p></li>
<li><p><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.get_blacklist">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">get_blacklist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recipe_folder</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#get_blacklist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.get_blacklist" title="Permalink to this definition">¶</a></dt>
<dd><p>Return list of recipes to skip from blacklists</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#set" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.get_deps">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">get_deps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recipe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#get_deps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.get_deps" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator of dependencies for a single recipe</p>
<p>Only names (not versions) of dependencies are yielded.</p>
<p>If the variant/version matrix yields multiple instances of the metadata,
the union of these dependencies is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>recipe</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em> or </em><em>MetaData</em>) – If string, it is a path to the recipe; otherwise assume it is a parsed
conda_build.metadata.MetaData instance.</p></li>
<li><p><strong>build</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True yield build dependencies, if False yield run dependencies.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.get_free_space">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">get_free_space</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#get_free_space"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.get_free_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Return free space in MB on disk</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.get_latest_recipes">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">get_latest_recipes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recipe_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">package</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'*'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#get_latest_recipes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.get_latest_recipes" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator of recipes.</p>
<p>Finds (possibly nested) directories containing a <code class="docutils literal notranslate"><span class="pre">meta.yaml</span></code> file and returns
the latest version of each recipe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>recipe_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Top-level dir of the recipes</p></li>
<li><p><strong>config</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a><em> or </em><em>filename</em>) – </p></li>
<li><p><strong>package</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em> or </em><em>iterable</em>) – Pattern or patterns to restrict the results.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.get_recipes">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">get_recipes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recipe_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">package</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'*'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#get_recipes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.get_recipes" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator of recipes.</p>
<p>Finds (possibly nested) directories containing a <code class="docutils literal notranslate"><span class="pre">meta.yaml</span></code> file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>recipe_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Top-level dir of the recipes</p></li>
<li><p><strong>package</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em> or </em><em>iterable</em>) – Pattern or patterns to restrict the results.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.last_commit_to_master">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">last_commit_to_master</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#last_commit_to_master"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.last_commit_to_master" title="Permalink to this definition">¶</a></dt>
<dd><p>Identifies the day of the last commit to master branch.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.load_all_meta">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">load_all_meta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recipe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">finalize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#load_all_meta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.load_all_meta" title="Permalink to this definition">¶</a></dt>
<dd><p>For each environment, yield the rendered meta.yaml.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>finalize</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True, do a full conda-build render. Determines exact package builds
of build/host dependencies. It involves costly dependency resolution
via conda and also download of those packages (to inspect possible
run_exports). For fast-running tasks like linting, set to False.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.load_conda_build_config">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">load_conda_build_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">platform</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trim_skip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#load_conda_build_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.load_conda_build_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Load conda build config while considering global pinnings from conda-forge.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.load_config">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">load_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#load_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.load_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses config file, building paths to relevant blacklists</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to YAML config file</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.load_first_metadata">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">load_first_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recipe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">finalize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#load_first_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.load_first_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns just the first of possibly many metadata files. Used for when you
need to do things like check a package name or version number (which are
not expected to change between variants).</p>
<p>If the recipe will be skipped, then returns None</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>finalize</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True, do a full conda-build render. Determines exact package builds
of build/host dependencies. It involves costly dependency resolution
via conda and also download of those packages (to inspect possible
run_exports). For fast-running tasks like linting, set to False.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.load_meta_fast">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">load_meta_fast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recipe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#load_meta_fast"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.load_meta_fast" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a package name, find the current meta.yaml file, parse it, and return
the dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>recipe</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Path to recipe (directory containing the meta.yaml file)</p></li>
<li><p><strong>env</strong> – Optional variables to expand</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Tuple of original recipe string and rendered dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.newly_unblacklisted">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">newly_unblacklisted</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recipe_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">git_range</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#newly_unblacklisted"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.newly_unblacklisted" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the set of recipes that were blacklisted in master branch but have
since been removed from the blacklist. Considers the contents of all
blacklists in the current config file and all blacklists in the same config
file in master branch.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Needs filename (and not dict) because we check what the contents of the
config file were in the master branch.</p></li>
<li><p><strong>recipe_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to recipe dir, needed by get_blacklist</p></li>
<li><p><strong>git_range</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – If str or single-item list. If <code class="docutils literal notranslate"><span class="pre">'HEAD'</span></code> or <code class="docutils literal notranslate"><span class="pre">['HEAD']</span></code> or <code class="docutils literal notranslate"><span class="pre">['master',</span>
<span class="pre">'HEAD']</span></code>, compares the current changes to master. If other commits are
specified, then use those commits directly via <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">show</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.run">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">cmds</span></em>, <em class="sig-param"><span class="pre">env=None</span></em>, <em class="sig-param"><span class="pre">mask=None</span></em>, <em class="sig-param"><span class="pre">live=True</span></em>, <em class="sig-param"><span class="pre">mylogger=&lt;Logger</span> <span class="pre">bioconda_utils.utils</span> <span class="pre">(WARNING)&gt;</span></em>, <em class="sig-param"><span class="pre">loglevel=20</span></em>, <em class="sig-param"><span class="pre">**kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a command (with logging, masking, etc)</p>
<ul class="simple">
<li><p>Explicitly decodes stdout to avoid UnicodeDecodeErrors that can occur when
using the <code class="docutils literal notranslate"><span class="pre">universal_newlines=True</span></code> argument in the standard
subprocess.run.</p></li>
<li><p>Masks secrets</p></li>
<li><p>Passed live output to <a class="reference external" href="https://docs.python.org/3/library/logging.html#module-logging" title="(in Python v3.10)"><code class="xref any docutils literal notranslate"><span class="pre">logging</span></code></a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> – List of command and arguments</p></li>
<li><p><strong>env</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – Optional environment for command</p></li>
<li><p><strong>mask</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – List of terms to mask (secrets)</p></li>
<li><p><strong>live</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Whether output should be sent to log</p></li>
<li><p><strong>kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]) – Additional arguments to <a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.10)"><code class="xref any docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.CompletedProcess" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompletedProcess</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>CompletedProcess object</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>subprocess.CalledProcessError if the process failed</strong> – </p></li>
<li><p><strong>FileNotFoundError if the command could not be found</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.sandboxed_env">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">sandboxed_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#sandboxed_env"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.sandboxed_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager to temporarily set os.environ, only allowing env vars from
the existing <a class="reference external" href="https://docs.python.org/3/library/os.html#os.environ" title="(in Python v3.10)"><code class="xref any docutils literal notranslate"><span class="pre">os.environ</span></code></a> or the provided <strong>env</strong> that match
ENV_VAR_WHITELIST globs.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.setup_logger">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">setup_logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'bioconda_utils'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loglevel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logfile_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_command_max_lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'BIOCONDA</span> <span class="pre">'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">msgfmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'%(asctime)s</span> <span class="pre">%(log_color)s%(name)s</span> <span class="pre">%(levelname)s%(reset)s</span> <span class="pre">%(message)s'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datefmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'%H:%M:%S'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#setup_logger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.setup_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up logging for bioconda-utils</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Module name for which to get a logger (<code class="docutils literal notranslate"><span class="pre">__name__</span></code>)</p></li>
<li><p><strong>loglevel</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]) – Log level, can be name or int level</p></li>
<li><p><strong>logfile</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – File to log to as well</p></li>
<li><p><strong>logfile_level</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]) – Log level for file logging</p></li>
<li><p><strong>prefix</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Prefix to add to our log messages</p></li>
<li><p><strong>msgfmt</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Format for messages</p></li>
<li><p><strong>datefmt</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Format for dates</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Logger</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A new logger</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.temp_env">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">temp_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#temp_env"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.temp_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager to temporarily set os.environ.</p>
<p>Used to send values in <strong>env</strong> to processes that only read the os.environ,
for example when filling in meta.yaml with jinja2 template variables.</p>
<p>All values are converted to string before sending to os.environ</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.temp_os">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">temp_os</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">platform</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#temp_os"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.temp_os" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager to temporarily set sys.platform.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.threads_to_use">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">threads_to_use</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#threads_to_use"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.threads_to_use" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of cores we are allowed to run on</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.tqdm">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">tqdm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#tqdm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.tqdm" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper around TQDM handling disable</p>
<p>Logging is disabled if:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TERM</span></code> is set to <code class="docutils literal notranslate"><span class="pre">dumb</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CIRCLECI</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code></p></li>
<li><p>the effective log level of the is lower than set via <code class="docutils literal notranslate"><span class="pre">loglevel</span></code></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>loglevel</strong> – logging loglevel (the number, so logging.INFO)</p></li>
<li><p><strong>logger</strong> – local logger (in case it has different effective log level)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.validate_config">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">validate_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#validate_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.validate_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate config against schema</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – If str, assume it’s a path to YAML file and load it. If dict, use it
directly.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bioconda_utils.utils.wraps">
<span class="sig-prename descclassname"><span class="pre">bioconda_utils.utils.</span></span><span class="sig-name descname"><span class="pre">wraps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bioconda_utils/utils.html#wraps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bioconda_utils.utils.wraps" title="Permalink to this definition">¶</a></dt>
<dd><p>Custom wraps() function for decorators</p>
<p>This one differs from functiools.wraps and boltons.funcutils.wraps in
that it allows <em>adding</em> keyword arguments to the function signature.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>  <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>  <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">extra_param</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>     <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Called with extra_param=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">extra_param</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>     <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>  <span class="k">return</span> <span class="n">wrapper</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@decorator</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">,</span> <span class="n">arg3</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">pass</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s1">&#39;val1&#39;</span><span class="p">,</span> <span class="s1">&#39;val2&#39;</span><span class="p">,</span> <span class="n">extra_param</span><span class="o">=</span><span class="s1">&#39;xyz&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2016-2021, The Bioconda Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/developer/_autosummary/bioconda_utils.utils.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    <div class="git-ribbon">
      <a href="https://github.com/bioconda/bioconda-utils/edit/master/docs/source/developer/_autosummary/bioconda_utils.utils.rst" rel="me">Edit me on GitHub</a>
    </div>
  </body>
</html>