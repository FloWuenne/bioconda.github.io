
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>FAQs &#8212; Bioconda  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/style.css" />
    <link rel="stylesheet" type="text/css" href="_static/font-awesome-4.7.0/css/font-awesome.min.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/vega.min.js"></script>
    <script src="_static/vega-lite.min.js"></script>
    <script src="_static/vega-embed.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Contributing to Bioconda" href="contributor/index.html" />
    <link rel="prev" title="Usage" href="index.html" />
    <link href="https://fonts.googleapis.com/css?family=Lato|Raleway" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet">

    <link rel="apple-touch-icon" sizes="57x57" href="_static/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="_static/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="_static/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="_static/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="_static/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="_static/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="_static/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="_static/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="_static/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="_static/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="_static/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="_static/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="_static/favicon-16x16.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="_static/ms-icon-144x144.png">

    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#ffffff">

   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />


  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/logo/bioconda_monochrome_small.png" alt="Logo"/>
    
  </a>
</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">FAQs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-speed-up-package-installation">How do I speed up package installation?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#speedup-option-1-use-mamba">Speedup option 1: use <code class="docutils literal notranslate"><span class="pre">mamba</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#speedup-option-2-use-environments-strategically">Speedup option 2: use environments strategically</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#what-versions-are-supported">What versions are supported?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#operating-systems">Operating Systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python">Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pinned-packages">Pinned packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unsupported-versions">Unsupported versions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-keep-track-of-environments">How do I keep track of environments?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-s-the-difference-between-anaconda-conda-miniconda-and-mamba">What’s the difference between Anaconda, conda, Miniconda, and mamba?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-s-the-difference-between-a-recipe-and-a-package">What’s the difference between a recipe and a package?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-s-the-difference-between-miniconda-miniforge-mambaforge-micromamba">What’s the difference between miniconda, miniforge, mambaforge, micromamba?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#why-are-bioconductor-data-packages-failing-to-install">Why are Bioconductor data packages failing to install?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-s-the-difference-between-a-build-number-and-a-package-version">What’s the difference between a build number and a package version?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#why-shouldn-t-i-include-build-numbers-in-my-environment-yamls">Why shouldn’t I include build numbers in my environment YAMLs?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributor/index.html">Contributing to Bioconda</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/index.html">Tutorials</a></li>
</ul>

<ul>
  
  <li class="toctree-l1"><a href="conda-package_index.html">Browse packages</a></li>
  
  <li class="toctree-l1"><a href="https://github.com/bioconda/bioconda-recipes">Bioconda @ Github</a></li>
  
  <li class="toctree-l1"><a href="https://gitter.im/bioconda/Lobby"><img alt="Gitter" src="https://img.shields.io/gitter/room/bioconda/Lobby.svg"></a></li>
  
</ul>
<div id="searchbox" style="display: none" role="search">
    <h3 id="searchlabel">Search</h3>
    <p id="searchdesc">packages & docs</p>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="faqs">
<h1>FAQs<a class="headerlink" href="#faqs" title="Permalink to this heading">¶</a></h1>
<section id="how-do-i-speed-up-package-installation">
<span id="speedup"></span><h2>How do I speed up package installation?<a class="headerlink" href="#how-do-i-speed-up-package-installation" title="Permalink to this heading">¶</a></h2>
<section id="speedup-option-1-use-mamba">
<h3>Speedup option 1: use <code class="docutils literal notranslate"><span class="pre">mamba</span></code><a class="headerlink" href="#speedup-option-1-use-mamba" title="Permalink to this heading">¶</a></h3>
<p><a class="reference external" href="https://github.com/mamba-org/mamba">mamba</a> is a drop-in replacement for
conda that uses a faster dependency solving library and parts reimplemented in
C++ for speed. Install it just into the base environment so that it’s always
available, like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>install<span class="w"> </span>mamba<span class="w"> </span>-n<span class="w"> </span>base<span class="w"> </span>-c<span class="w"> </span>conda-forge
</pre></div>
</div>
<p>Then use <code class="docutils literal notranslate"><span class="pre">mamba</span></code> instead of <code class="docutils literal notranslate"><span class="pre">conda</span></code>.</p>
<p>For example, instead of <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span></code>, use <code class="docutils literal notranslate"><span class="pre">mamba</span> <span class="pre">install</span></code>. Instead of
<code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">create</span></code> use <code class="docutils literal notranslate"><span class="pre">mamba</span> <span class="pre">env</span> <span class="pre">create</span></code>, and so on. <code class="docutils literal notranslate"><span class="pre">mamba</span></code> also uses
the same configuration as <code class="docutils literal notranslate"><span class="pre">conda</span></code>, so you don’t need to reconfigure the
channels.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Installing <code class="docutils literal notranslate"><span class="pre">mamba</span></code> into the base environment (<code class="docutils literal notranslate"><span class="pre">-n</span> <span class="pre">base</span></code> in the command
above) means that it does <strong>not</strong> need to be installed into each subsequent
environment you create.</p>
</div>
</section>
<section id="speedup-option-2-use-environments-strategically">
<h3>Speedup option 2: use environments strategically<a class="headerlink" href="#speedup-option-2-use-environments-strategically" title="Permalink to this heading">¶</a></h3>
<p>Here are several ways you can use environments to minimize the time spent on
solving dependencies, which typically is what takes the longest amount of time:</p>
<ol class="arabic">
<li><p>Keep the <code class="docutils literal notranslate"><span class="pre">base</span></code> environment small.</p>
<p>If you install everything into the same environment (e.g. the <code class="docutils literal notranslate"><span class="pre">base</span></code>
environment, which is used any time you don’t otherwise specify an
environment), then whenever you add or update packages to it, the solver has
to do a lot of work to make sure all of the many packages are mutually
compatible with each other.</p>
</li>
<li><p>Use smaller environments.</p>
<p>Fewer packages means less work for the solver. Try to use environments only
containing what you need for a particular project or task.</p>
</li>
<li><p>Pin dependencies.</p>
<p>Sometimes pinning dependencies to a specific version can speed up the
solving, since it reduces the search space for the solver. In some cases
this may backfire though. For example, you can’t pin an older version of
R and also use newer R packages that don’t support that version of R.</p>
</li>
<li><p>Create an environment from a file with all dependencies.</p>
<p>Creating an environment with all dependencies at once can be faster than
incrementally adding packages to an existing environment. For example
<code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">create</span> <span class="pre">-n</span> <span class="pre">myenv</span> <span class="pre">--file</span> <span class="pre">requirements.txt</span></code>, or <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">create</span>
<span class="pre">--file</span> <span class="pre">env.yaml</span></code>.</p>
</li>
<li><p>Use strict channel priority.</p>
<p>Ensure that you’ve run <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">config</span> <span class="pre">--set</span> <span class="pre">channel_priority</span> <span class="pre">strict</span></code> to
respect the configured channel order. This can also speed up the solving.</p>
</li>
</ol>
</section>
</section>
<section id="what-versions-are-supported">
<h2>What versions are supported?<a class="headerlink" href="#what-versions-are-supported" title="Permalink to this heading">¶</a></h2>
<section id="operating-systems">
<h3>Operating Systems<a class="headerlink" href="#operating-systems" title="Permalink to this heading">¶</a></h3>
<p>Bioconda only supports 64-bit Linux and macOS. ARM is not currently supported.</p>
</section>
<section id="python">
<h3>Python<a class="headerlink" href="#python" title="Permalink to this heading">¶</a></h3>
<p>Bioconda only supports python 2.7, 3.6, 3.7, 3.8 and 3.9.</p>
<p>The exception to this is Bioconda packages which declare <code class="xref any docutils literal notranslate"><span class="pre">noarch:</span> <span class="pre">python</span></code> and
only depend on such packages - those packages can be installed in an
environment with any version of python they say they can support. However many
python packages in Bioconda depend on other Bioconda packages with architecture
specific builds, such as <a class="conda-package reference internal" href="recipes/pysam/README.html#package-pysam" title="pysam package"><code class="xref any conda conda-package docutils literal notranslate"><span class="pre">pysam</span></code></a>, and so do not meet this criteria.</p>
</section>
<section id="pinned-packages">
<h3>Pinned packages<a class="headerlink" href="#pinned-packages" title="Permalink to this heading">¶</a></h3>
<p>Some packages require <a class="reference external" href="https://en.wikipedia.org/wiki/Application_binary_interface">ABI</a> compatibility
with underlying libraries. To ensure that packages can work together, there are
some libraries that need to be <em>pinned</em>, or fixed to a particular version.
Other packages are then built with that specific version (and therefore that
specific ABI) to ensure they can all work together.</p>
<p>The authoritative source for which packages are pinned and to which versions
can be found in the <a class="reference external" href="https://github.com/bioconda/bioconda-utils/blob/master/bioconda_utils/bioconda_utils-conda_build_config.yaml">bioconda_utils-conda_build_config.yaml</a>
file.</p>
<p>This is <em>in addition to</em> the conda-forge specified versions,
<a class="reference external" href="https://github.com/conda-forge/conda-forge-pinning-feedstock/blob/master/recipe/conda_build_config.yaml">conda_build_config.yaml</a>
which pins versions of base dependencies like boost, zlib, and many others.</p>
</section>
<section id="unsupported-versions">
<h3>Unsupported versions<a class="headerlink" href="#unsupported-versions" title="Permalink to this heading">¶</a></h3>
<p>If there is a version of a dependency you wish to build against that Bioconda
does not currently support, please reach out to the <a class="reference external" href="https://gitter.im/bioconda/Lobby">Bioconda Gitter</a> for more information about if supporting
that version is feasible, if work on that is already being done, and how you
can help.</p>
<p>To find out against which version you can pin a package, e.g. x.y.* or x.*
please use <a class="reference external" href="https://abi-laboratory.pro/tracker/">ABI-Laboratory</a>.</p>
</section>
</section>
<section id="how-do-i-keep-track-of-environments">
<h2>How do I keep track of environments?<a class="headerlink" href="#how-do-i-keep-track-of-environments" title="Permalink to this heading">¶</a></h2>
<p>You can view your created environments with <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">list</span></code>.</p>
<p>Note that if keeping track of different environment names
becomes a burden, you can create an environment in the same directory as
a project with the <code class="docutils literal notranslate"><span class="pre">-p</span></code> argument, e.g.,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>create<span class="w"> </span>-p<span class="w"> </span>./env<span class="w"> </span>--file<span class="w"> </span>requirements.txt
</pre></div>
</div>
<p>and then activate the environment with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>activate<span class="w"> </span>./env
</pre></div>
</div>
<p>This also works quite well in a shared directory so everyone can use (and
maintain) the same environment.</p>
</section>
<section id="what-s-the-difference-between-anaconda-conda-miniconda-and-mamba">
<span id="conda-anaconda-minconda"></span><h2>What’s the difference between Anaconda, conda, Miniconda, and mamba?<a class="headerlink" href="#what-s-the-difference-between-anaconda-conda-miniconda-and-mamba" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>conda is the name of the package manager, which is what runs when you call,
e.g., <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span></code>.</p></li>
<li><p>mamba is a drop-in replacement for conda (see above for details)</p></li>
<li><p>Anaconda is a large installation including Python, conda, and a large number
of packages.</p></li>
<li><p>Miniconda just has conda and its dependencies (in contrast to the larger
Anaconda distribution).</p></li>
</ul>
<p>The <a class="reference external" href="https://www.continuum.io/downloads">Anaconda Python distribution</a>
started out as a bundle of scientific Python packages that were otherwise
difficult to install. It was created by <a class="reference external" href="https://www.continuum.io/">ContinuumIO</a> and remains the easiest way to install the full
scientific Python stack.</p>
<p>Many packaging problems had to be solved in order to provide all of that
software in Anaconda in a cross-platform bundle, and one of the tools that came
out of that work was the conda package manager. So conda is part of th Anaconda
Python distribution. But conda ended up being very useful on its own and for
things other than Python, so ContinuumIO spun it out into its own separate
<a class="reference external" href="https://github.com/conda/conda">open-source package</a>.</p>
<p>Conda became very useful for setting up lightweight environments for testing
code or running individual steps of a workflow. To avoid needing to install the
<em>entire</em> Anaconda distribution each time, the Miniconda installer was created.
This installs only what you need to run conda itself, which can then be used to
create other environments. So the “mini” in Miniconda means that it’s
a fraction of the size of the full Anaconda installation.</p>
<p>So: conda is a package manager, Miniconda is the conda installer, and Anaconda
is a scientific Python distribution that also includes conda.</p>
</section>
<section id="what-s-the-difference-between-a-recipe-and-a-package">
<h2>What’s the difference between a recipe and a package?<a class="headerlink" href="#what-s-the-difference-between-a-recipe-and-a-package" title="Permalink to this heading">¶</a></h2>
<p>A <em>recipe</em> is a directory containing small set of files that defines name,
version, dependencies, and URL for source code. A recipe typically contains
a <code class="docutils literal notranslate"><span class="pre">meta.yaml</span></code> file that defines these settings and a <code class="docutils literal notranslate"><span class="pre">build.sh</span></code> script that
builds the software.</p>
<p>A recipe is converted into a <em>package</em> by running <a class="conda-forge reference external" href="https://github.com/conda-forge/conda-build-feedstock"><code class="xref any conda conda-package docutils literal notranslate"><span class="pre">conda-build</span></code></a> on the recipe.
A package is a bgzipped tar file (<code class="docutils literal notranslate"><span class="pre">.tar.bz2</span></code>) that contains the built
software in expected subdirectories, along with a list of what other packages
are dependencies. For example, a conda package built for a Python package would
end up with <code class="xref any docutils literal notranslate"><span class="pre">.py</span></code> files in the <code class="xref any docutils literal notranslate"><span class="pre">lib/python3.8/site-packages/</span></code>
directory inside the tarball, and would specify (at least) Python as
a dependency.</p>
<p>Packages are uploaded to anaconda.org so that users can install them
with <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The <a class="reference external" href="https://conda.io/projects/conda-build/en/latest/resources/package-spec.html" title="(in conda-build v3.23.3+12.g52d2553f.dirty)"><code class="docutils literal notranslate"><span class="pre">Conda</span> <span class="pre">package</span> <span class="pre">specification</span></code></a> has details on exactly
what a package contains and how it is installed into an
environment.</p>
</div>
</section>
<section id="what-s-the-difference-between-miniconda-miniforge-mambaforge-micromamba">
<h2>What’s the difference between miniconda, miniforge, mambaforge, micromamba?<a class="headerlink" href="#what-s-the-difference-between-miniconda-miniforge-mambaforge-micromamba" title="Permalink to this heading">¶</a></h2>
<p><strong>Miniconda</strong> is the slimmed-down version of the Anaconda distribution;
miniconda only has conda and its dependencies.</p>
<p><strong>Miniforge</strong> is like miniconda, but with the conda-forge channel preconfigured
and all packages coming from the conda-forge and <em>not</em> the <code class="docutils literal notranslate"><span class="pre">defaults</span></code>
channel.</p>
<p><strong>Mambaforge</strong> is like miniforge, but has mamba installed into the base environment.</p>
<p><strong>Micromamba</strong> is not a conda distribution. Rather, it is a minimal binary that
has roughly the same commands as mamba, so that a single executable (rather
than an entire Python installation required for conda itself) can be used to
create environments. Micromamba is currently still experimental.</p>
</section>
<section id="why-are-bioconductor-data-packages-failing-to-install">
<h2>Why are Bioconductor data packages failing to install?<a class="headerlink" href="#why-are-bioconductor-data-packages-failing-to-install" title="Permalink to this heading">¶</a></h2>
<p>When creating an environment containing Bioconductor data packages, you may get
errors like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">ValueError</span><span class="p">:</span> <span class="n">unsupported</span> <span class="nb">format</span> <span class="n">character</span> <span class="s1">&#39;T&#39;</span> <span class="p">(</span><span class="mh">0x54</span><span class="p">)</span> <span class="n">at</span> <span class="n">index</span> <span class="mi">648</span>
</pre></div>
</div>
<p>The actual error will be somewhere above that, with something like this (here,
it’s for the <code class="docutils literal notranslate"><span class="pre">bioconductor-org.hs.eg.db=3.14.0=r41hdfd78af_0</span></code> package):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">message</span><span class="p">:</span>
<span class="n">post</span><span class="o">-</span><span class="n">link</span> <span class="n">script</span> <span class="n">failed</span> <span class="k">for</span> <span class="n">package</span> <span class="n">bioconda</span><span class="p">::</span><span class="n">bioconductor</span><span class="o">-</span><span class="n">org</span><span class="o">.</span><span class="n">hs</span><span class="o">.</span><span class="n">eg</span><span class="o">.</span><span class="n">db</span><span class="o">-</span><span class="mf">3.14.0</span><span class="o">-</span><span class="n">r41hdfd78af_0</span>
<span class="n">location</span> <span class="n">of</span> <span class="n">failed</span> <span class="n">script</span><span class="p">:</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">dalerr</span><span class="o">/</span><span class="n">env</span><span class="o">/</span><span class="nb">bin</span><span class="o">/.</span><span class="n">bioconductor</span><span class="o">-</span><span class="n">org</span><span class="o">.</span><span class="n">hs</span><span class="o">.</span><span class="n">eg</span><span class="o">.</span><span class="n">db</span><span class="o">-</span><span class="n">post</span><span class="o">-</span><span class="n">link</span><span class="o">.</span><span class="n">sh</span>
<span class="o">==&gt;</span> <span class="n">script</span> <span class="n">messages</span> <span class="o">&lt;==</span>
<span class="o">&lt;</span><span class="kc">None</span><span class="o">&gt;</span>
<span class="o">==&gt;</span> <span class="n">script</span> <span class="n">output</span> <span class="o">&lt;==</span>
<span class="n">stdout</span><span class="p">:</span> <span class="n">ERROR</span><span class="p">:</span> <span class="n">post</span><span class="o">-</span><span class="n">link</span><span class="o">.</span><span class="n">sh</span> <span class="n">was</span> <span class="n">unable</span> <span class="n">to</span> <span class="n">download</span> <span class="nb">any</span> <span class="n">of</span> <span class="n">the</span> <span class="n">following</span> <span class="n">URLs</span> <span class="k">with</span> <span class="n">the</span> <span class="n">md5sum</span> <span class="n">ef7fc0096ec579f564a33f0f4869324a</span><span class="p">:</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">bioconductor</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span><span class="mf">3.14</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">annotation</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">contrib</span><span class="o">/</span><span class="n">org</span><span class="o">.</span><span class="n">Hs</span><span class="o">.</span><span class="n">eg</span><span class="o">.</span><span class="n">db_3</span><span class="mf">.14.0</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">bioarchive</span><span class="o">.</span><span class="n">galaxyproject</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">org</span><span class="o">.</span><span class="n">Hs</span><span class="o">.</span><span class="n">eg</span><span class="o">.</span><span class="n">db_3</span><span class="mf">.14.0</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">depot</span><span class="o">.</span><span class="n">galaxyproject</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">software</span><span class="o">/</span><span class="n">bioconductor</span><span class="o">-</span><span class="n">org</span><span class="o">.</span><span class="n">hs</span><span class="o">.</span><span class="n">eg</span><span class="o">.</span><span class="n">db</span><span class="o">/</span><span class="n">bioconductor</span><span class="o">-</span><span class="n">org</span><span class="o">.</span><span class="n">hs</span><span class="o">.</span><span class="n">eg</span><span class="o">.</span><span class="n">db_3</span><span class="mf">.14.0</span><span class="n">_src_all</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
<p><strong>To fix it</strong>, you need to adjust the requirements. If you had this as a requirement:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bioconductor</span><span class="o">-</span><span class="n">org</span><span class="o">.</span><span class="n">hs</span><span class="o">.</span><span class="n">eg</span><span class="o">.</span><span class="n">db</span><span class="o">=</span><span class="mf">3.14.0</span><span class="o">=</span><span class="n">r41hdfd78af_0</span>
</pre></div>
</div>
<p>then increase the build number on the end, here from <code class="docutils literal notranslate"><span class="pre">_0</span></code> to <code class="docutils literal notranslate"><span class="pre">_1</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bioconductor</span><span class="o">-</span><span class="n">org</span><span class="o">.</span><span class="n">hs</span><span class="o">.</span><span class="n">eg</span><span class="o">.</span><span class="n">db</span><span class="o">=</span><span class="mf">3.14.0</span><span class="o">=</span><span class="n">r41hdfd78af_1</span>
</pre></div>
</div>
<p>or, relax the exact build constraint while keeping the package version the same:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bioconductor</span><span class="o">-</span><span class="n">org</span><span class="o">.</span><span class="n">hs</span><span class="o">.</span><span class="n">eg</span><span class="o">.</span><span class="n">db</span><span class="o">=</span><span class="mf">3.14.0</span>
</pre></div>
</div>
<p>and then re-build your environment.</p>
<p><strong>The reason this is happening</strong> is a combination of factors. Early on in
Bioconda’s history we made the decision that pure data packages – like
Bioconductor data packages, which can be multiple GB in size – would not be
directly converted into conda packages. That way, we could avoid additional
storage load on Anaconda’s servers since the data were already available from
Bioconductor, and we could provide a mechanism to use the data packages within
an R environment living in a conda environment. This mechanism is
a <a class="reference external" href="https://docs.conda.io/projects/conda-build/en/latest/resources/link-scripts.html">post-link.sh</a>
script for the recipe.</p>
<p>When a user installs the package via conda, the GB of data aren’t in the
package. Rather, the URL pointing to the tarball is in the post-link script,
and the script uses <code class="docutils literal notranslate"><span class="pre">curl</span></code> to download the package from Bioconductor and
install into the conda environment’s R library. We also set up separate
infrastructure to archive data packages to other servers, and these archive
URLs were also stored in the post-link scripts as backups.</p>
<p><em>The problem is that back then, we assumed that URLs would be stable and we did
not use the</em> <code class="docutils literal notranslate"><span class="pre">-L</span></code> <em>argument for curl in post-link scripts</em>.</p>
<p>Recently Bioconductor packages have moved to a different server (XSEDE/ACCESS).
The old URL, the one hard-coded in the post-link scripts, is correctly now
a redirect to the new location. But without <code class="docutils literal notranslate"><span class="pre">-L</span></code>, the existing recipes and
their post-link scripts cannot follow the redirect! Compounding this, the
archive URLs stopped being generated, so the backup strategy also failed.</p>
<p>The fix was to re-build all Bioconductor data packages and include the <code class="docutils literal notranslate"><span class="pre">-L</span></code>
argument, allowing them to follow the redirect and correctly install the
package. Conda packages have the idea of a “build number”, which allows us to
still provide the same version of the package (3.14.0 in the example above) but
packaged differently (in this case, with a post-link script that works in
Bioconductor’s current server environment).</p>
<p><strong>Reproducibility is hard.</strong> We are trying our best, and conda is an amazing
resource. But the fact that a single entity does not (and should not!) control
all code, data, packages, distribution mechanisms, and installation mechanisms,
means that we will always be at risk of similar situations in the future.
Hopefully we are guarding better against this particular issue, but see
<a class="reference external" href="http://dx.doi.org/10.1016/j.cels.2018.03.014">Grüning et al 2018</a>
(especially Fig 1) for advice on more reproducible strategies you can use for
your own work.</p>
</section>
<section id="what-s-the-difference-between-a-build-number-and-a-package-version">
<span id="version-vs-build"></span><h2>What’s the difference between a build number and a package version?<a class="headerlink" href="#what-s-the-difference-between-a-build-number-and-a-package-version" title="Permalink to this heading">¶</a></h2>
<p>A <em>package version</em> is the version of the tool. A tool can possibly be packaged
multiple times, even though the underlying tool doesn’t change. In such a case,
the package version remains unchanged, but the <em>build number</em> chances.</p>
<p>The Bioconductor data packages described above are one example of what would
cause a change in build number (i.e., adding a single argument to
a post-installation script). Other times, a package might have omitted an
executable that should have been included, so a new build for the same version
is created that fixes that packaging issue, without changing anything in the
package itself. In rare cases, packages are completely broken, and are moved to
a “broken” label in the conda channel, effectively removing them from being
installed by default.</p>
<p>More often, build numbers change due to underlying dependencies across the
entire Bioconda and conda-forge ecosystem. These build numbers include a hash.
That hash is generated by concatenating all of the pinned versions of packages
that are dependencies of that package.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">samtools==1.15.1=h1170115_0</span></code> refers to version 1.15.1 of
<code class="docutils literal notranslate"><span class="pre">samtools</span></code>. The build number is <code class="docutils literal notranslate"><span class="pre">h1170115_0</span></code>.  The hash part is the
<code class="docutils literal notranslate"><span class="pre">h1170115</span></code>, and the <code class="docutils literal notranslate"><span class="pre">_0</span></code> refers to the first (zero-indexing) build of this
samtools version and this hash.</p>
<p>The hash, in turn is calculated by looking at the dependencies of samtools. The
dependencies happen to include things like a C compiler (gcc), the zlib and htslib
libraries and make. Some of these dependencies are “pinned”. That is, they are
fixed to a particular version or versions, and those versions are used
everywhere in conda-forge and Bioconda to maintain ABI compatibility
(basically, to let packages co-exist in the same environment). You can find the
conda-forge pinnings <a class="reference external" href="https://github.com/conda-forge/conda-forge-pinning-feedstock/blob/main/recipe/conda_build_config.yaml">here</a>,
and the bioconda-specific ones <a class="reference external" href="https://github.com/bioconda/bioconda-utils/blob/master/bioconda_utils/bioconda_utils-conda_build_config.yaml">here</a>.</p>
<p>In the case of samtools, that hash <code class="docutils literal notranslate"><span class="pre">h1170115</span></code> incorporates the packages and
versions of all of its dependencies that are pinned. That includes gcc, zlib,
and htslib. But it doesn’t include make in that hash, because make is not
pinned in those files.</p>
<p>The build number is likely to change, and you probably should avoid including
the build number in your environment specifications – see <a class="reference internal" href="#no-builds"><span class="std std-ref">Why shouldn’t I include build numbers in my environment YAMLs?</span></a> for
more information on this.</p>
</section>
<section id="why-shouldn-t-i-include-build-numbers-in-my-environment-yamls">
<span id="no-builds"></span><h2>Why shouldn’t I include build numbers in my environment YAMLs?<a class="headerlink" href="#why-shouldn-t-i-include-build-numbers-in-my-environment-yamls" title="Permalink to this heading">¶</a></h2>
<p>As described at <a class="reference internal" href="#version-vs-build"><span class="std std-ref">What’s the difference between a build number and a package version?</span></a>, build numbers may change over time,
independently of the actual package version. This means that when you are
recording the packages installed in an environment, it is not useful to record
the build number, as this is effectively over-specifying and may cause
difficulty when trying to re-create the environment.</p>
<p>To record the installed packages in an environment, we recommend the
<code class="docutils literal notranslate"><span class="pre">--no-builds</span></code> argument to <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">export</span></code>. For example, with an
environment activated:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">env</span> <span class="n">export</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">builds</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--no-builds</span></code> argument completely removes the build number from the
output, avoiding future errors when trying to rebuild the environment, and
allowing the conda solver to identify the packages that can co-exist in the
same environment.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2016-2023, The Bioconda Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.1.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/faqs.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    <div class="git-ribbon">
      <a href="https://github.com/bioconda/bioconda-utils/edit/master/docs/source/faqs.rst" rel="me">Edit me on GitHub</a>
    </div>
  </body>
</html>