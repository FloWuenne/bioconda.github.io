
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>utils &#8212; Bioconda  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css" />
    <link rel="stylesheet" type="text/css" href="../_static/font-awesome-4.7.0/css/font-awesome.min.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="upload" href="bioconda_utils.upload.html" />
    <link href="https://fonts.googleapis.com/css?family=Lato|Raleway" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet">

    <link rel="apple-touch-icon" sizes="57x57" href="../_static/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="../_static/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../_static/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="../_static/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../_static/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="../_static/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="../_static/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="../_static/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../_static/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="../_static/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../_static/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../_static/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../_static/favicon-16x16.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="../_static/ms-icon-144x144.png">

    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#ffffff">

   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />


  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo/bioconda_monochrome_small.png" alt="Logo"/>
    
  </a>
</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../updating.html">Updating recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../updating.html#updating-recipes-for-a-pinning-change">Updating recipes for a pinning change</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linting.html">Linting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs.html">FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build-system.html">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cb3.html">Conda build v3</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../developer.html">Developer Docs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bioconda-utils.html"><code class="docutils literal notranslate"><span class="pre">bioconda-utils</span></code></a></li>
<li class="toctree-l2 current"><a class="reference internal" href="bioconda_utils.html">bioconda_utils</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.bot.html">bot</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.aiopipe.html">aiopipe</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.bioconductor_skeleton.html">bioconductor_skeleton</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.build.html">build</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.circleci.html">circleci</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.cli.html">cli</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.cran_skeleton.html">cran_skeleton</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.docker_utils.html">docker_utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.githandler.html">githandler</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.github_integration.html">github_integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.githubhandler.html">githubhandler</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.graph.html">graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.hosters.html">hosters</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.lint_functions.html">lint_functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.linting.html">linting</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.pkg_test.html">pkg_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.recipe.html">recipe</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.sphinxext.html">sphinxext</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.autobump.html">autobump</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.update_pinnings.html">update_pinnings</a></li>
<li class="toctree-l3"><a class="reference internal" href="bioconda_utils.upload.html">upload</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">utils</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="bioconda_utils.bot.html">bot</a></li>
</ul>
</li>
</ul>

<ul>
  
  <li class="toctree-l1"><a href="https://github.com/bioconda/bioconda-recipes">Bioconda @ Github</a></li>
  
  <li class="toctree-l1"><a href="../conda-recipe_index.html">Recipe Index</a></li>
  
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-bioconda_utils.utils">
<span id="utils"></span><h1>utils<a class="headerlink" href="#module-bioconda_utils.utils" title="Permalink to this headline">¶</a></h1>
<p>Utility Functions and Classes</p>
<p>This module collects small pieces of code used throughout <a class="reference internal" href="bioconda_utils.html#module-bioconda_utils" title="bioconda_utils"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bioconda_utils</span></code></a>.</p>
<p class="rubric">Functions</p>
<table class="longtable docutils align-center">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.allowed_env_var" title="bioconda_utils.utils.allowed_env_var"><code class="xref py py-obj docutils literal notranslate"><span class="pre">allowed_env_var</span></code></a>(s[, docker])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.bin_for" title="bioconda_utils.utils.bin_for"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bin_for</span></code></a>([name])</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.built_package_paths" title="bioconda_utils.utils.built_package_paths"><code class="xref py py-obj docutils literal notranslate"><span class="pre">built_package_paths</span></code></a>(recipe)</p></td>
<td><p>Returns the path to which a recipe would be built.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.changed_since_master" title="bioconda_utils.utils.changed_since_master"><code class="xref py py-obj docutils literal notranslate"><span class="pre">changed_since_master</span></code></a>(recipe_folder)</p></td>
<td><p>Return filenames changed since master branch.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.check_recipe_skippable" title="bioconda_utils.utils.check_recipe_skippable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_recipe_skippable</span></code></a>(recipe, check_channels)</p></td>
<td><p>Return True if the same number of builds (per subdir) defined by the recipe are already in channel_packages.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.ensure_list" title="bioconda_utils.utils.ensure_list"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ensure_list</span></code></a>(obj)</p></td>
<td><p>Wraps <strong>obj</strong> in a list if necessary</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.envstr" title="bioconda_utils.utils.envstr"><code class="xref py py-obj docutils literal notranslate"><span class="pre">envstr</span></code></a>(env)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.file_from_commit" title="bioconda_utils.utils.file_from_commit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">file_from_commit</span></code></a>(commit, filename)</p></td>
<td><p>Returns the contents of a file at a particular commit as a string.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.flatten_dict" title="bioconda_utils.utils.flatten_dict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flatten_dict</span></code></a>(dict)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.get_blacklist" title="bioconda_utils.utils.get_blacklist"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_blacklist</span></code></a>(blacklists, recipe_folder)</p></td>
<td><p>Return list of recipes to skip from blacklists</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.get_conda_build_config_files" title="bioconda_utils.utils.get_conda_build_config_files"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_conda_build_config_files</span></code></a>([config])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.get_deps" title="bioconda_utils.utils.get_deps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_deps</span></code></a>([recipe, meta, build])</p></td>
<td><p>Generator of dependencies for a single recipe</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.get_free_space" title="bioconda_utils.utils.get_free_space"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_free_space</span></code></a>()</p></td>
<td><p>Return free space in MB on disk</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.get_latest_recipes" title="bioconda_utils.utils.get_latest_recipes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_latest_recipes</span></code></a>(recipe_folder, config[, …])</p></td>
<td><p>Generator of recipes.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.get_package_paths" title="bioconda_utils.utils.get_package_paths"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_package_paths</span></code></a>(recipe, check_channels[, …])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.get_recipes" title="bioconda_utils.utils.get_recipes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_recipes</span></code></a>(recipe_folder[, package])</p></td>
<td><p>Generator of recipes.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.last_commit_to_master" title="bioconda_utils.utils.last_commit_to_master"><code class="xref py py-obj docutils literal notranslate"><span class="pre">last_commit_to_master</span></code></a>()</p></td>
<td><p>Identifies the day of the last commit to master branch.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.load_all_meta" title="bioconda_utils.utils.load_all_meta"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_all_meta</span></code></a>(recipe[, config, finalize])</p></td>
<td><p>For each environment, yield the rendered meta.yaml.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.load_conda_build_config" title="bioconda_utils.utils.load_conda_build_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_conda_build_config</span></code></a>([platform, trim_skip])</p></td>
<td><p>Load conda build config while considering global pinnings from conda-forge.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.load_config" title="bioconda_utils.utils.load_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_config</span></code></a>(path)</p></td>
<td><p>Parses config file, building paths to relevant blacklists</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.load_first_metadata" title="bioconda_utils.utils.load_first_metadata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_first_metadata</span></code></a>(recipe[, config, finalize])</p></td>
<td><p>Returns just the first of possibly many metadata files.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.load_meta_fast" title="bioconda_utils.utils.load_meta_fast"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_meta_fast</span></code></a>(recipe[, env])</p></td>
<td><p>Given a package name, find the current meta.yaml file, parse it, and return the dict.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.modified_recipes" title="bioconda_utils.utils.modified_recipes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">modified_recipes</span></code></a>(git_range, recipe_folder, …)</p></td>
<td><p>Returns files under the recipes dir that have been modified within the git range.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.newly_unblacklisted" title="bioconda_utils.utils.newly_unblacklisted"><code class="xref py py-obj docutils literal notranslate"><span class="pre">newly_unblacklisted</span></code></a>(config_file, …)</p></td>
<td><p>Returns the set of recipes that were blacklisted in master branch but have since been removed from the blacklist.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.parallel_iter" title="bioconda_utils.utils.parallel_iter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">parallel_iter</span></code></a>(func, items, desc, *args, **kwargs)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.run" title="bioconda_utils.utils.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(cmds[, env, mask])</p></td>
<td><p>Wrapper around subprocess.run()</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.sandboxed_env" title="bioconda_utils.utils.sandboxed_env"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sandboxed_env</span></code></a>(env)</p></td>
<td><p>Context manager to temporarily set os.environ, only allowing env vars from the existing <a class="reference external" href="https://docs.python.org/3/library/os.html#os.environ" title="(in Python v3.7)"><code class="xref any docutils literal notranslate"><span class="pre">os.environ</span></code></a> or the provided <strong>env</strong> that match ENV_VAR_WHITELIST globs.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.set_max_threads" title="bioconda_utils.utils.set_max_threads"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_max_threads</span></code></a>(n)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.setup_logger" title="bioconda_utils.utils.setup_logger"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setup_logger</span></code></a>(name[, loglevel, prefix, …])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.temp_env" title="bioconda_utils.utils.temp_env"><code class="xref py py-obj docutils literal notranslate"><span class="pre">temp_env</span></code></a>(env)</p></td>
<td><p>Context manager to temporarily set os.environ.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.temp_os" title="bioconda_utils.utils.temp_os"><code class="xref py py-obj docutils literal notranslate"><span class="pre">temp_os</span></code></a>(platform)</p></td>
<td><p>Context manager to temporarily set sys.platform.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.threads_to_use" title="bioconda_utils.utils.threads_to_use"><code class="xref py py-obj docutils literal notranslate"><span class="pre">threads_to_use</span></code></a>()</p></td>
<td><p>Returns the number of cores we are allowed to run on</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.tqdm" title="bioconda_utils.utils.tqdm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tqdm</span></code></a>(*args, **kwargs)</p></td>
<td><p>Wrapper around TQDM handling disable</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.validate_config" title="bioconda_utils.utils.validate_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">validate_config</span></code></a>(config)</p></td>
<td><p>Validate config against schema</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.wraps" title="bioconda_utils.utils.wraps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">wraps</span></code></a>(func)</p></td>
<td><p>Custom wraps() function for decorators</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table class="longtable docutils align-center">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.AsyncRequests" title="bioconda_utils.utils.AsyncRequests"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncRequests</span></code></a></p></td>
<td><p>Download a bunch of files in parallel</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.CondaBuildConfigFile" title="bioconda_utils.utils.CondaBuildConfigFile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CondaBuildConfigFile</span></code></a>(arg, path)</p></td>
<td><p>Create new instance of CondaBuildConfigFile(arg, path)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.EnvMatrix" title="bioconda_utils.utils.EnvMatrix"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EnvMatrix</span></code></a>(env)</p></td>
<td><p>Intended to be initialized with a YAML file and iterated over to yield all combinations of environments.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.JinjaSilentUndefined" title="bioconda_utils.utils.JinjaSilentUndefined"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JinjaSilentUndefined</span></code></a>([hint, obj, name, exc])</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.Progress" title="bioconda_utils.utils.Progress"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Progress</span></code></a>()</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.RepoData" title="bioconda_utils.utils.RepoData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RepoData</span></code></a></p></td>
<td><p>Singleton providing access to package directory on anaconda cloud</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.TqdmHandler" title="bioconda_utils.utils.TqdmHandler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TqdmHandler</span></code></a>(*args, **kwargs)</p></td>
<td><p>Tqdm aware logging StreamHandler</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Exceptions</p>
<table class="longtable docutils align-center">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#bioconda_utils.utils.BiocondaUtilsWarning" title="bioconda_utils.utils.BiocondaUtilsWarning"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BiocondaUtilsWarning</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bioconda_utils.utils.DivergentBuildsError" title="bioconda_utils.utils.DivergentBuildsError"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DivergentBuildsError</span></code></a></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<p class="rubric">Documentation</p>
<dl class="class">
<dt id="bioconda_utils.utils.AsyncRequests">
<em class="property">class </em><code class="descclassname">bioconda_utils.utils.</code><code class="descname">AsyncRequests</code><a class="reference internal" href="../_modules/bioconda_utils/utils.html#AsyncRequests"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.AsyncRequests" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Download a bunch of files in parallel</p>
<p>This is not really a class, more a name space encapsulating a bunch of calls.</p>
<dl class="attribute">
<dt id="bioconda_utils.utils.AsyncRequests.CONNECTIONS_PER_HOST">
<code class="descname">CONNECTIONS_PER_HOST</code><em class="property"> = 4</em><a class="headerlink" href="#bioconda_utils.utils.AsyncRequests.CONNECTIONS_PER_HOST" title="Permalink to this definition">¶</a></dt>
<dd><p>Max connections to each server</p>
</dd></dl>

<dl class="attribute">
<dt id="bioconda_utils.utils.AsyncRequests.USER_AGENT">
<code class="descname">USER_AGENT</code><em class="property"> = 'bioconda/bioconda-utils'</em><a class="headerlink" href="#bioconda_utils.utils.AsyncRequests.USER_AGENT" title="Permalink to this definition">¶</a></dt>
<dd><p>Identify ourselves</p>
</dd></dl>

<dl class="classmethod">
<dt id="bioconda_utils.utils.AsyncRequests.async_fetch">
<em class="property">classmethod </em><code class="descname">async_fetch</code><span class="sig-paren">(</span><em>urls</em>, <em>descs</em>, <em>cb</em>, <em>datas</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#AsyncRequests.async_fetch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.AsyncRequests.async_fetch" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="bioconda_utils.utils.AsyncRequests.fetch">
<em class="property">classmethod </em><code class="descname">fetch</code><span class="sig-paren">(</span><em>urls</em>, <em>descs</em>, <em>cb</em>, <em>datas</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#AsyncRequests.fetch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.AsyncRequests.fetch" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch data from URLs.</p>
<p>This will use asyncio to manage a pool of connections at once, speeding
up download as compared to iterative use of <code class="docutils literal notranslate"><span class="pre">requests</span></code> significantly.
It will also retry on non-permanent HTTP error codes (i.e. 429, 502,
503 and 504).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>urls</strong> – List of URLS</p></li>
<li><p><strong>descs</strong> – Matching list of descriptions (for progress display)</p></li>
<li><p><strong>cb</strong> – As each download is completed, data is passed through this function.
Use to e.g. offload json parsing into download loop.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="bioconda_utils.utils.BiocondaUtilsWarning">
<em class="property">exception </em><code class="descclassname">bioconda_utils.utils.</code><code class="descname">BiocondaUtilsWarning</code><a class="reference internal" href="../_modules/bioconda_utils/utils.html#BiocondaUtilsWarning"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.BiocondaUtilsWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#UserWarning" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">UserWarning</span></code></a></p>
</dd></dl>

<dl class="class">
<dt id="bioconda_utils.utils.CondaBuildConfigFile">
<em class="property">class </em><code class="descclassname">bioconda_utils.utils.</code><code class="descname">CondaBuildConfigFile</code><span class="sig-paren">(</span><em>arg</em>, <em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#bioconda_utils.utils.CondaBuildConfigFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a></p>
<p>Create new instance of CondaBuildConfigFile(arg, path)</p>
<dl class="attribute">
<dt id="bioconda_utils.utils.CondaBuildConfigFile.arg">
<code class="descname">arg</code><a class="headerlink" href="#bioconda_utils.utils.CondaBuildConfigFile.arg" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="attribute">
<dt id="bioconda_utils.utils.CondaBuildConfigFile.path">
<code class="descname">path</code><a class="headerlink" href="#bioconda_utils.utils.CondaBuildConfigFile.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="bioconda_utils.utils.DivergentBuildsError">
<em class="property">exception </em><code class="descclassname">bioconda_utils.utils.</code><code class="descname">DivergentBuildsError</code><a class="reference internal" href="../_modules/bioconda_utils/utils.html#DivergentBuildsError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.DivergentBuildsError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
</dd></dl>

<dl class="class">
<dt id="bioconda_utils.utils.EnvMatrix">
<em class="property">class </em><code class="descclassname">bioconda_utils.utils.</code><code class="descname">EnvMatrix</code><span class="sig-paren">(</span><em>env</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#EnvMatrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.EnvMatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Intended to be initialized with a YAML file and iterated over to yield all
combinations of environments.</p>
<p>YAML file has the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CONDA_PY</span><span class="p">:</span>
  <span class="o">-</span> <span class="s2">&quot;2.7&quot;</span>
  <span class="o">-</span> <span class="s2">&quot;3.5&quot;</span>
<span class="n">CONDA_BOOST</span><span class="p">:</span> <span class="s2">&quot;1.60&quot;</span>
<span class="n">CONDA_PERL</span><span class="p">:</span> <span class="s2">&quot;5.22.0&quot;</span>
<span class="n">CONDA_NPY</span><span class="p">:</span> <span class="s2">&quot;110&quot;</span>
<span class="n">CONDA_NCURSES</span><span class="p">:</span> <span class="s2">&quot;5.9&quot;</span>
<span class="n">CONDA_GSL</span><span class="p">:</span> <span class="s2">&quot;1.16&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>env</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – If str, assume it’s a path to a YAML-format filename and load it
into a dict. If a dict is provided, use it directly.</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="bioconda_utils.utils.JinjaSilentUndefined">
<em class="property">class </em><code class="descclassname">bioconda_utils.utils.</code><code class="descname">JinjaSilentUndefined</code><span class="sig-paren">(</span><em>hint=None</em>, <em>obj=missing</em>, <em>name=None</em>, <em>exc=&lt;class 'jinja2.exceptions.UndefinedError'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#JinjaSilentUndefined"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.JinjaSilentUndefined" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">jinja2.runtime.Undefined</span></code></p>
</dd></dl>

<dl class="class">
<dt id="bioconda_utils.utils.Progress">
<em class="property">class </em><code class="descclassname">bioconda_utils.utils.</code><code class="descname">Progress</code><a class="reference internal" href="../_modules/bioconda_utils/utils.html#Progress"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.Progress" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="method">
<dt id="bioconda_utils.utils.Progress.progress">
<code class="descname">progress</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#Progress.progress"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.Progress.progress" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="bioconda_utils.utils.RepoData">
<em class="property">class </em><code class="descclassname">bioconda_utils.utils.</code><code class="descname">RepoData</code><a class="reference internal" href="../_modules/bioconda_utils/utils.html#RepoData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.RepoData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Singleton providing access to package directory on anaconda cloud</p>
<p>If the first call provides a filename as <strong>cache</strong> argument, the
file is used to cache the directory in CSV format.</p>
<p>Data structure:</p>
<p>Each <strong>channel</strong> hosted at anaconda cloud comprises a number of
<strong>subdirs</strong> in which the individual package files reside. The
<strong>subdirs</strong> can be one of <strong>noarch</strong>, <strong>osx-64</strong> and <strong>linux-64</strong>
for Bioconda. (Technically <code class="docutils literal notranslate"><span class="pre">(noarch|(linux|osx|win)-(64|32))</span></code>
appears to be the schema).</p>
<p>For <strong>channel/subdir</strong> (aka <strong>channel/platform</strong>) combination, a
<strong>repodata.json</strong> contains a <strong>package</strong> key describing each
package file with at least the following information:</p>
<p>name: Package name (lowercase, alphanumeric + dash)</p>
<p>version: Version (no dash, PEP440)</p>
<p>build_number: Non negative integer indicating packaging revisions</p>
<dl class="simple">
<dt>build: String comprising hash of pinned dependencies and build</dt><dd><p>number. Used to distinguish different builds of the same
package/version combination.</p>
</dd>
<dt>depends: Runtime requirements for package as list of strings. We</dt><dd><p>do not currently load this.</p>
</dd>
<dt>arch: Architecture key (x86_64). Not used by conda and not loaded</dt><dd><p>here.</p>
</dd>
<dt>platform: Platform of package (osx, linux, noarch). Optional</dt><dd><p>upstream, not used by conda. We generate this from the subdir
information to have it available.</p>
</dd>
</dl>
<p>Repodata versions:</p>
<p>The version is indicated by the key <strong>repodata_version</strong>, with
absence of that key indication version 0.</p>
<p>In version 0, the <strong>info</strong> key contains the <strong>subdir</strong>,
<strong>platform</strong>, <strong>arch</strong>, <strong>default_python_version</strong> and
<strong>default_numpy_version</strong> keys. In version 1 it only contains the
<strong>subdir</strong> key.</p>
<p>In version 1, a key <strong>removed</strong> was added, listing packages
removed from the repository.</p>
<p>Makes RepoData a singleton</p>
<dl class="attribute">
<dt id="bioconda_utils.utils.RepoData.REPODATA_DEFAULTS_URL">
<code class="descname">REPODATA_DEFAULTS_URL</code><em class="property"> = 'https://repo.anaconda.com/pkgs/main/{subdir}/repodata.json'</em><a class="headerlink" href="#bioconda_utils.utils.RepoData.REPODATA_DEFAULTS_URL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="bioconda_utils.utils.RepoData.REPODATA_LABELED_URL">
<code class="descname">REPODATA_LABELED_URL</code><em class="property"> = 'https://conda.anaconda.org/{channel}/label/{label}/{subdir}/repodata.json'</em><a class="headerlink" href="#bioconda_utils.utils.RepoData.REPODATA_LABELED_URL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="bioconda_utils.utils.RepoData.REPODATA_URL">
<code class="descname">REPODATA_URL</code><em class="property"> = 'https://conda.anaconda.org/{channel}/{subdir}/repodata.json'</em><a class="headerlink" href="#bioconda_utils.utils.RepoData.REPODATA_URL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="bioconda_utils.utils.RepoData.cache_file">
<code class="descname">cache_file</code><em class="property"> = None</em><a class="headerlink" href="#bioconda_utils.utils.RepoData.cache_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="bioconda_utils.utils.RepoData.cache_timeout">
<code class="descname">cache_timeout</code><em class="property"> = 28800</em><a class="headerlink" href="#bioconda_utils.utils.RepoData.cache_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>default lifetime for repodata cache</p>
</dd></dl>

<dl class="attribute">
<dt id="bioconda_utils.utils.RepoData.channels">
<code class="descname">channels</code><a class="headerlink" href="#bioconda_utils.utils.RepoData.channels" title="Permalink to this definition">¶</a></dt>
<dd><p>Return channels to load.</p>
</dd></dl>

<dl class="attribute">
<dt id="bioconda_utils.utils.RepoData.columns">
<code class="descname">columns</code><em class="property"> = ['build', 'build_number', 'name', 'version', 'depends', 'channel', 'subdir', 'platform']</em><a class="headerlink" href="#bioconda_utils.utils.RepoData.columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Columns available in internal dataframe</p>
</dd></dl>

<dl class="attribute">
<dt id="bioconda_utils.utils.RepoData.config">
<code class="descname">config</code><em class="property"> = {'blacklists': ['/home/circleci/project/docs/_bioconda_recipes/build-fail-blacklist'], 'channels': ['conda-forge', 'bioconda', 'defaults'], 'env_matrix': 'scripts/env_matrix.yml', 'requirements': None, 'upload_channel': 'bioconda'}</em><a class="headerlink" href="#bioconda_utils.utils.RepoData.config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="bioconda_utils.utils.RepoData.df">
<code class="descname">df</code><a class="headerlink" href="#bioconda_utils.utils.RepoData.df" title="Permalink to this definition">¶</a></dt>
<dd><p>Internal Pandas DataFrame object</p>
<p>Try not to use this … the point of this class is to be able to
change the structure in which the data is held.</p>
</dd></dl>

<dl class="method">
<dt id="bioconda_utils.utils.RepoData.get_latest_versions">
<code class="descname">get_latest_versions</code><span class="sig-paren">(</span><em>channel</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#RepoData.get_latest_versions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.RepoData.get_latest_versions" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the latest version for each package in <strong>channel</strong></p>
</dd></dl>

<dl class="method">
<dt id="bioconda_utils.utils.RepoData.get_package_data">
<code class="descname">get_package_data</code><span class="sig-paren">(</span><em>key=None</em>, <em>channels=None</em>, <em>name=None</em>, <em>version=None</em>, <em>build_number=None</em>, <em>platform=None</em>, <em>build=None</em>, <em>native=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#RepoData.get_package_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.RepoData.get_package_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Get <strong>key</strong> for each package in <strong>channels</strong></p>
<p>If <strong>key</strong> is not give, returns bool whether there are matches.
If <strong>key</strong> is a string, returns list of strings.
If <strong>key</strong> is a list of string, returns tuple iterator.</p>
</dd></dl>

<dl class="method">
<dt id="bioconda_utils.utils.RepoData.get_versions">
<code class="descname">get_versions</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#RepoData.get_versions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.RepoData.get_versions" title="Permalink to this definition">¶</a></dt>
<dd><p>Get versions available for package</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – package name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary mapping version numbers to list of architectures
e.g. {‘0.1’: [‘linux’], ‘0.2’: [‘linux’, ‘osx’], ‘0.3’: [‘noarch’]}</p>
</dd>
</dl>
</dd></dl>

<dl class="staticmethod">
<dt id="bioconda_utils.utils.RepoData.native_platform">
<em class="property">static </em><code class="descname">native_platform</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#RepoData.native_platform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.RepoData.native_platform" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="bioconda_utils.utils.RepoData.platform2subdir">
<em class="property">static </em><code class="descname">platform2subdir</code><span class="sig-paren">(</span><em>platform</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#RepoData.platform2subdir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.RepoData.platform2subdir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="bioconda_utils.utils.RepoData.platforms">
<code class="descname">platforms</code><em class="property"> = ['linux', 'osx', 'noarch']</em><a class="headerlink" href="#bioconda_utils.utils.RepoData.platforms" title="Permalink to this definition">¶</a></dt>
<dd><p>Platforms loaded</p>
</dd></dl>

<dl class="classmethod">
<dt id="bioconda_utils.utils.RepoData.register_config">
<em class="property">classmethod </em><code class="descname">register_config</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#RepoData.register_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.RepoData.register_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bioconda_utils.utils.RepoData.set_cache">
<code class="descname">set_cache</code><span class="sig-paren">(</span><em>cache</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#RepoData.set_cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.RepoData.set_cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bioconda_utils.utils.RepoData.set_timeout">
<code class="descname">set_timeout</code><span class="sig-paren">(</span><em>timeout</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#RepoData.set_timeout"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.RepoData.set_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the timeout after which the repodata should be reloaded</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="bioconda_utils.utils.TqdmHandler">
<em class="property">class </em><code class="descclassname">bioconda_utils.utils.</code><code class="descname">TqdmHandler</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#TqdmHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.TqdmHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/logging.handlers.html#logging.StreamHandler" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.StreamHandler</span></code></a></p>
<p>Tqdm aware logging StreamHandler</p>
<p>Passes all log writes through tqdm to allow progress bars and log
messages to coexist without clobbering terminal</p>
<dl class="method">
<dt id="bioconda_utils.utils.TqdmHandler.emit">
<code class="descname">emit</code><span class="sig-paren">(</span><em>record</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#TqdmHandler.emit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.TqdmHandler.emit" title="Permalink to this definition">¶</a></dt>
<dd><p>Emit a record.</p>
<p>If a formatter is specified, it is used to format the record.
The record is then written to the stream with a trailing newline.  If
exception information is present, it is formatted using
traceback.print_exception and appended to the stream.  If the stream
has an ‘encoding’ attribute, it is used to determine how to do the
output to the stream.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.allowed_env_var">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">allowed_env_var</code><span class="sig-paren">(</span><em>s</em>, <em>docker=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#allowed_env_var"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.allowed_env_var" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.bin_for">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">bin_for</code><span class="sig-paren">(</span><em>name='conda'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#bin_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.bin_for" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.built_package_paths">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">built_package_paths</code><span class="sig-paren">(</span><em>recipe</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#built_package_paths"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.built_package_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the path to which a recipe would be built.</p>
<p>Does not necessarily exist; equivalent to <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">build</span> <span class="pre">--output</span> <span class="pre">recipename</span></code>
but without the subprocess.</p>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.changed_since_master">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">changed_since_master</code><span class="sig-paren">(</span><em>recipe_folder</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#changed_since_master"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.changed_since_master" title="Permalink to this definition">¶</a></dt>
<dd><p>Return filenames changed since master branch.</p>
<p>Note that this uses <code class="docutils literal notranslate"><span class="pre">origin</span></code>, so if you are working on a fork of the main
repo and have added the main repo as <code class="docutils literal notranslate"><span class="pre">upstream</span></code>, then you’ll have to do
a <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">master</span> <span class="pre">&amp;&amp;</span> <span class="pre">git</span> <span class="pre">pull</span> <span class="pre">upstream</span> <span class="pre">master</span></code> to update your fork.</p>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.check_recipe_skippable">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">check_recipe_skippable</code><span class="sig-paren">(</span><em>recipe</em>, <em>check_channels</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#check_recipe_skippable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.check_recipe_skippable" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the same number of builds (per subdir) defined by the recipe
are already in channel_packages.</p>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.ensure_list">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">ensure_list</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#ensure_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.ensure_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps <strong>obj</strong> in a list if necessary</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ensure_list</span><span class="p">(</span><span class="s2">&quot;one&quot;</span><span class="p">)</span>
<span class="go">[&quot;one&quot;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ensure_list</span><span class="p">([</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">])</span>
<span class="go">[&quot;one&quot;, &quot;two&quot;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.envstr">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">envstr</code><span class="sig-paren">(</span><em>env</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#envstr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.envstr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.file_from_commit">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">file_from_commit</code><span class="sig-paren">(</span><em>commit</em>, <em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#file_from_commit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.file_from_commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the contents of a file at a particular commit as a string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>commit</strong> (<em>commit-like string</em>) – </p></li>
<li><p><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.flatten_dict">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">flatten_dict</code><span class="sig-paren">(</span><em>dict</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#flatten_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.flatten_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.get_blacklist">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">get_blacklist</code><span class="sig-paren">(</span><em>blacklists</em>, <em>recipe_folder</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#get_blacklist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.get_blacklist" title="Permalink to this definition">¶</a></dt>
<dd><p>Return list of recipes to skip from blacklists</p>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.get_conda_build_config_files">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">get_conda_build_config_files</code><span class="sig-paren">(</span><em>config=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#get_conda_build_config_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.get_conda_build_config_files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.get_deps">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">get_deps</code><span class="sig-paren">(</span><em>recipe=None</em>, <em>meta=None</em>, <em>build=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#get_deps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.get_deps" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator of dependencies for a single recipe</p>
<p>Only names (not versions) of dependencies are yielded.</p>
<p>If the variant/version matrix yields multiple instances of the metadata,
the union of these dependencies is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>recipe</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><em>MetaData</em>) – If string, it is a path to the recipe; otherwise assume it is a parsed
conda_build.metadata.MetaData instance.</p></li>
<li><p><strong>build</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If True yield build dependencies, if False yield run dependencies.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.get_free_space">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">get_free_space</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#get_free_space"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.get_free_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Return free space in MB on disk</p>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.get_latest_recipes">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">get_latest_recipes</code><span class="sig-paren">(</span><em>recipe_folder</em>, <em>config</em>, <em>package='*'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#get_latest_recipes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.get_latest_recipes" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator of recipes.</p>
<p>Finds (possibly nested) directories containing a <code class="docutils literal notranslate"><span class="pre">meta.yaml</span></code> file and returns
the latest version of each recipe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>recipe_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Top-level dir of the recipes</p></li>
<li><p><strong>config</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a><em> or </em><em>filename</em>) – </p></li>
<li><p><strong>package</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><em>iterable</em>) – Pattern or patterns to restrict the results.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.get_package_paths">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">get_package_paths</code><span class="sig-paren">(</span><em>recipe</em>, <em>check_channels</em>, <em>force=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#get_package_paths"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.get_package_paths" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.get_recipes">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">get_recipes</code><span class="sig-paren">(</span><em>recipe_folder</em>, <em>package='*'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#get_recipes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.get_recipes" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator of recipes.</p>
<p>Finds (possibly nested) directories containing a <code class="docutils literal notranslate"><span class="pre">meta.yaml</span></code> file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>recipe_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Top-level dir of the recipes</p></li>
<li><p><strong>package</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><em>iterable</em>) – Pattern or patterns to restrict the results.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.last_commit_to_master">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">last_commit_to_master</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#last_commit_to_master"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.last_commit_to_master" title="Permalink to this definition">¶</a></dt>
<dd><p>Identifies the day of the last commit to master branch.</p>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.load_all_meta">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">load_all_meta</code><span class="sig-paren">(</span><em>recipe</em>, <em>config=None</em>, <em>finalize=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#load_all_meta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.load_all_meta" title="Permalink to this definition">¶</a></dt>
<dd><p>For each environment, yield the rendered meta.yaml.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>finalize</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If True, do a full conda-build render. Determines exact package builds
of build/host dependencies. It involves costly dependency resolution
via conda and also download of those packages (to inspect possible
run_exports). For fast-running tasks like linting, set to False.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.load_conda_build_config">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">load_conda_build_config</code><span class="sig-paren">(</span><em>platform=None</em>, <em>trim_skip=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#load_conda_build_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.load_conda_build_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Load conda build config while considering global pinnings from conda-forge.</p>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.load_config">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">load_config</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#load_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.load_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses config file, building paths to relevant blacklists</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Path to YAML config file</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.load_first_metadata">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">load_first_metadata</code><span class="sig-paren">(</span><em>recipe</em>, <em>config=None</em>, <em>finalize=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#load_first_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.load_first_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns just the first of possibly many metadata files. Used for when you
need to do things like check a package name or version number (which are
not expected to change between variants).</p>
<p>If the recipe will be skipped, then returns None</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>finalize</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If True, do a full conda-build render. Determines exact package builds
of build/host dependencies. It involves costly dependency resolution
via conda and also download of those packages (to inspect possible
run_exports). For fast-running tasks like linting, set to False.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.load_meta_fast">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">load_meta_fast</code><span class="sig-paren">(</span><em>recipe</em>, <em>env=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#load_meta_fast"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.load_meta_fast" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a package name, find the current meta.yaml file, parse it, and return
the dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>recipe</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Path to recipe (directory containing the meta.yaml file)</p></li>
<li><p><strong>env</strong> – Optional variables to expand</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Tuple of original recipe string and rendered dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.modified_recipes">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">modified_recipes</code><span class="sig-paren">(</span><em>git_range</em>, <em>recipe_folder</em>, <em>config_file</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#modified_recipes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.modified_recipes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns files under the recipes dir that have been modified within the git
range. Includes meta.yaml files for recipes that have been unblacklisted in
the git range. Filenames are returned with the <code class="docutils literal notranslate"><span class="pre">recipe_folder</span></code> included.</p>
<dl class="simple">
<dt>git_range<span class="classifier">list or tuple of length 1 or 2</span></dt><dd><p>For example, <code class="docutils literal notranslate"><span class="pre">['00232ffe',</span> <span class="pre">'10fab113']</span></code>, or commonly <code class="docutils literal notranslate"><span class="pre">['master',</span> <span class="pre">'HEAD']</span></code>
or <code class="docutils literal notranslate"><span class="pre">['master']</span></code>. If length 2, then the commits are provided to <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code>
using the triple-dot syntax, <code class="docutils literal notranslate"><span class="pre">commit1...commit2</span></code>. If length 1, the
comparison is any changes in the working tree relative to the commit.</p>
</dd>
<dt>recipe_folder<span class="classifier">str</span></dt><dd><p>Top-level recipes dir in which to search for meta.yaml files.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.newly_unblacklisted">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">newly_unblacklisted</code><span class="sig-paren">(</span><em>config_file</em>, <em>recipe_folder</em>, <em>git_range</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#newly_unblacklisted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.newly_unblacklisted" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the set of recipes that were blacklisted in master branch but have
since been removed from the blacklist. Considers the contents of all
blacklists in the current config file and all blacklists in the same config
file in master branch.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Needs filename (and not dict) because we check what the contents of the
config file were in the master branch.</p></li>
<li><p><strong>recipe_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Path to recipe dir, needed by get_blacklist</p></li>
<li><p><strong>git_range</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – If str or single-item list. If <code class="docutils literal notranslate"><span class="pre">'HEAD'</span></code> or <code class="docutils literal notranslate"><span class="pre">['HEAD']</span></code> or <code class="docutils literal notranslate"><span class="pre">['master',</span>
<span class="pre">'HEAD']</span></code>, compares the current changes to master. If other commits are
specified, then use those commits directly via <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">show</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.parallel_iter">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">parallel_iter</code><span class="sig-paren">(</span><em>func</em>, <em>items</em>, <em>desc</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#parallel_iter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.parallel_iter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.run">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">run</code><span class="sig-paren">(</span><em>cmds</em>, <em>env=None</em>, <em>mask=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper around subprocess.run()</p>
<p>Explicitly decodes stdout to avoid UnicodeDecodeErrors that can occur when
using the <code class="docutils literal notranslate"><span class="pre">universal_newlines=True</span></code> argument in the standard
subprocess.run.</p>
<p>Also uses check=True and merges stderr with stdout. If a CalledProcessError
is raised, the output is decoded.</p>
<p>Returns the subprocess.CompletedProcess object.</p>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.sandboxed_env">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">sandboxed_env</code><span class="sig-paren">(</span><em>env</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#sandboxed_env"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.sandboxed_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager to temporarily set os.environ, only allowing env vars from
the existing <a class="reference external" href="https://docs.python.org/3/library/os.html#os.environ" title="(in Python v3.7)"><code class="xref any docutils literal notranslate"><span class="pre">os.environ</span></code></a> or the provided <strong>env</strong> that match
ENV_VAR_WHITELIST globs.</p>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.set_max_threads">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">set_max_threads</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#set_max_threads"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.set_max_threads" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.setup_logger">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">setup_logger</code><span class="sig-paren">(</span><em>name</em>, <em>loglevel=None</em>, <em>prefix='BIOCONDA '</em>, <em>msgfmt='%(asctime)s%(log_color)s{prefix}%(levelname)s%(reset)s %(message)s'</em>, <em>datefmt='%H:%M:%S '</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#setup_logger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.setup_logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.temp_env">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">temp_env</code><span class="sig-paren">(</span><em>env</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#temp_env"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.temp_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager to temporarily set os.environ.</p>
<p>Used to send values in <strong>env</strong> to processes that only read the os.environ,
for example when filling in meta.yaml with jinja2 template variables.</p>
<p>All values are converted to string before sending to os.environ</p>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.temp_os">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">temp_os</code><span class="sig-paren">(</span><em>platform</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#temp_os"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.temp_os" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager to temporarily set sys.platform.</p>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.threads_to_use">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">threads_to_use</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#threads_to_use"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.threads_to_use" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of cores we are allowed to run on</p>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.tqdm">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">tqdm</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#tqdm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.tqdm" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper around TQDM handling disable</p>
<p>Logging is disabled if:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TERM</span></code> is set to <code class="docutils literal notranslate"><span class="pre">dumb</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CIRCLECI</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code></p></li>
<li><p>the effective log level of the is lower than set via <code class="docutils literal notranslate"><span class="pre">loglevel</span></code></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>loglevel</strong> – logging loglevel (the number, so logging.INFO)</p></li>
<li><p><strong>logger</strong> – local logger (in case it has different effective log level)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.validate_config">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">validate_config</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#validate_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.validate_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate config against schema</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – If str, assume it’s a path to YAML file and load it. If dict, use it
directly.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bioconda_utils.utils.wraps">
<code class="descclassname">bioconda_utils.utils.</code><code class="descname">wraps</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bioconda_utils/utils.html#wraps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bioconda_utils.utils.wraps" title="Permalink to this definition">¶</a></dt>
<dd><p>Custom wraps() function for decorators</p>
<p>This one differs from functiools.wraps and boltons.funcutils.wraps in
that it allows <em>adding</em> keyword arguments to the function signature.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>  <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>  <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">extra_param</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>     <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Called with extra_param=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">extra_param</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>     <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>  <span class="k">return</span> <span class="n">wrapper</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@decorator</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">,</span> <span class="n">arg3</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">pass</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s1">&#39;val1&#39;</span><span class="p">,</span> <span class="s1">&#39;val2&#39;</span><span class="p">,</span> <span class="n">extra_param</span><span class="o">=</span><span class="s1">&#39;xyz&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2016-2019, The Bioconda Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/_autosummary/bioconda_utils.utils.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    <div class="git-ribbon">
      <a href="https://github.com/bioconda/bioconda-utils/edit/master/bioconda_utils/utils.py" rel="me">Edit me on GitHub</a>
    </div>
  </body>
</html>